@import com.advancedtelematic.login.Auth0Config

@(config: Auth0Config)(implicit messages: Messages, flash: Flash)
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>ATS Garage - Log in</title>
        <link rel="stylesheet" href='@routes.WebJarAssets.at(WebJarAssets.locate("css/bootstrap.min.css"))'>
        <link rel="stylesheet" href='@routes.Assets.versioned("css/font-awesome.min.css")'>
        <link rel="stylesheet" href='@routes.Assets.versioned("css/main-styles.css")'>
        <script type="text/javascript" src='@routes.Assets.versioned("js/jquery.min.js")'></script>
        <script type="text/javascript" src='@routes.WebJarAssets.at(WebJarAssets.locate("js/bootstrap.min.js"))'></script>        
        <script type="text/javascript" src='@routes.Assets.versioned("js/jquery.validate.min.js")'></script>
        <script type="text/javascript" src='@routes.Assets.versioned("js/lock-9.2.min.js")'></script>
        <script type="text/javascript" src='@routes.Assets.versioned("js/define-theme.js")'></script>
        <script>
            var AUTH0_CLIENT_ID = '@config.clientId';
            var AUTH0_DOMAIN = '@config.domain';
            var AUTH0_CALLBACK_URL = '@config.callbackURL';
        </script>
    </head>
    <body class="login">
        <div id="ats-page" style="display: none;">
            <div class="container ats">
                <div class="row">
                    <div class="login-content">
                        <div class="ats-header text-center">
                            <div id="widget-container"></div>
                        </div>
                    </div>
                </div>
            </div>

            <section class="ats-footer-panel"> 
                <a href="mailto:support@@atsgarage.com" class="clickme">Need Support?</a>
            </section>
        </div>

        <script>
            $(function () {
                $('body').addClass(defineTheme());
                $('#ats-page').fadeIn('slow');

                var lock = new Auth0Lock(AUTH0_CLIENT_ID, AUTH0_DOMAIN);
                lock.on("authorization_error", function (err) {
                    alert(err);
                });

                lock.show({
                    callbackURL: AUTH0_CALLBACK_URL,
                    container: 'widget-container',
                    authParams: {
                        scope: 'openid email'
                    },
                    dict: {
                        signin: {
                            title: "Login to ATS Garage.",
                            action: "Login",
                            forgotText: "Forgot Password >",
                            separatorText: "Or use an existing account:",
                            signupText: "Not registered yet? Sign up here.",
                            signinText: "Already registered? Login here."
                        },
                        signup: {
                            title: "Get started with ATS Garage.",
                            action: "Start now!",
                            signupText: "Not registered yet? Sign up here.",
                            signinText: "Already registered? Login here."
                        },
                        newReset: {
                            headerText: "Please enter your email address. We will send you a link to reset your password."
                        }
                    }
                });

                lock.on('ready', function () {
                    var appUrl = location.protocol + '//' + location.host;
                    $(".a0-image").append('<img src="' + appUrl + '/assets/img/atsgarage_white.png" alt="">');
                });
                lock.on('signin ready', function () {
                    $(".a0-forgot-pass").detach().appendTo('.bottom-content');
                });
                lock.on('signup ready', function () {
                    var link = $("<div class='terms-conditions'>By registering I agree to <a href='http://atsgarage.com/en/terms-conditions.html' target='_blank'>ATS Garage's Terms of Use.</a></div>");
                    link.appendTo('.bottom-content');
                });
            });

        </script>
    </body>
</html>
