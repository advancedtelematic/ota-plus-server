@import com.advancedtelematic.login.Auth0Config

@(config: Auth0Config)(implicit messages: Messages, flash: Flash)
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>ATS Garage - Log in</title>
        <link rel='stylesheet' href='@routes.WebJarAssets.at(WebJarAssets.locate("css/bootstrap.min.css"))'>
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
        <link rel='stylesheet' href='@routes.Assets.versioned("css/main-styles.css")'>
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
        <script type="text/javascript" src='@routes.WebJarAssets.at(WebJarAssets.locate("js/bootstrap.min.js"))'></script>        
        <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.min.js"></script>
        <script src="https://cdn.auth0.com/js/lock-9.2.min.js"></script>
        <script>
            var AUTH0_CLIENT_ID = '@config.clientId';
            var AUTH0_DOMAIN = '@config.domain';
            var AUTH0_CALLBACK_URL = '@config.callbackURL';
        </script>
    </head>
    <body class="login tmp-disable-door-style">
        <div id="ats-page" style="display: none;">
            <div class="container ats">
                <div class="row">
                    <div class="col-lg-4 col-lg-offset-4 col-md-6 col-md-offset-3 col-sm-12">
                        <div class="ats-header text-center">
                            <div id="widget-container"></div>
                        </div>
                    </div>
                </div>
            </div>
            <section class="ats-footer-panel"> 
                <a href="mailto:support@@atsgarage.com" class="clickme">Need Support?</a>
            </section>
        </div>

        <script>
            $(function () {
                $('#ats-page').fadeIn('slow');

                var lock = new Auth0Lock(AUTH0_CLIENT_ID, AUTH0_DOMAIN);
                lock.on("authorization_error", function (err) {
                    alert(err);
                });

                lock.show({
                    callbackURL: AUTH0_CALLBACK_URL,
                    container: 'widget-container',
                    authParams: {
                        scope: 'openid email'
                    },
                    dict: {
                        signin: {
                            action: "Log in",
                            forgotText: "Forgot Password >"
                        }
                    }
                });

                lock.on('ready', function () {
                    var appUrl = location.protocol + '//' + location.host;
                    $(".a0-image").append('<img src="' + appUrl + '/assets/img/atsgarage_white.png" alt="">');
                });
                lock.on('signin ready', function () {
                    $(".a0-forgot-pass").detach().appendTo('.bottom-content');
                });
            });

        </script>
    </body>
</html>
